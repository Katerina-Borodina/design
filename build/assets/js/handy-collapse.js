"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var HandyCollapse=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),_extends(this,{nameSpace:"hc",toggleButtonAttr:"data-".concat(t.nameSpace||"hc","-control"),toggleContentAttr:"data-".concat(t.nameSpace||"hc","-content"),activeClass:"is-active",isAnimation:!0,closeOthers:!0,animationSpeed:400,cssEasing:"ease-in-out",onSlideStart:function(){return!1},onSlideEnd:function(){return!1}},t),this.toggleBodyEls=document.querySelectorAll("[".concat(this.toggleContentAttr,"]")),this.toggleButtomEls=document.querySelectorAll("[".concat(this.toggleButtonAttr,"]")),this.itemsStatus={},this.init()}return _createClass(e,[{key:"init",value:function(){this.toggleBodyEls&&this.initItems(),this.toggleButtomEls&&this.setListner()}},{key:"initItems",value:function(){var e=this;this.itemsStatus={},Array.prototype.slice.call(this.toggleBodyEls).forEach(function(t){e.setItem(t)})}},{key:"setItem",value:function(t){t.style.overflow="hidden",t.style.maxHeight="none";var e=t.classList.contains(this.activeClass),i=t.getAttribute(this.toggleContentAttr);this.setItemStatus(i,e),e?this.open(i,!1,!1):this.close(i,!1,!1)}},{key:"setListner",value:function(){var n=this;Array.prototype.slice.call(this.toggleButtomEls).forEach(function(e){var i=e.getAttribute(n.toggleButtonAttr);i&&e.addEventListener("click",function(t){t.preventDefault(),n.toggleSlide(i,e)},!1)})}},{key:"setItemStatus",value:function(t,e){this.itemsStatus[t]={isOpen:e,isAnimating:!1}}},{key:"toggleSlide",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.itemsStatus[t].isAnimating||(!1===this.itemsStatus[t].isOpen?this.open(t,e,this.isAnimation):this.close(t,e,this.isAnimation))}},{key:"open",value:function(n){var s=this,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(n){this.itemsStatus.hasOwnProperty(n)||this.setItemStatus(n,!1),this.itemsStatus[n].isAnimating=!0,this.closeOthers&&Array.prototype.slice.call(this.toggleBodyEls).forEach(function(t,e){var i=t.getAttribute(s.toggleContentAttr);i!==n&&s.close(i,!1,o)}),!1!==t&&this.onSlideStart(!0,n);var e=document.querySelector("[".concat(this.toggleContentAttr,"='").concat(n,"']")),i=this.getTargetHeight(e);e.classList.add(this.activeClass);var a=document.querySelectorAll("[".concat(this.toggleButtonAttr,"='").concat(n,"']"));0<a.length&&Array.prototype.slice.call(a).forEach(function(t,e){t.classList.add(s.activeClass)}),o?(e.style.overflow="hidden",e.style.transition="".concat(this.animationSpeed,"ms ").concat(this.cssEasing),e.style.maxHeight=(i||"1000")+"px",setTimeout(function(){!1!==t&&s.onSlideEnd(!0,n),e.style.maxHeight="none",e.style.transition="",e.style.overflow="",s.itemsStatus[n].isAnimating=!1},this.animationSpeed)):(e.style.maxHeight="none",e.style.overflow="",this.itemsStatus[n].isAnimating=!1),this.itemsStatus[n].isOpen=!0}}},{key:"close",value:function(t){var i=this,e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(t){this.itemsStatus.hasOwnProperty(t)||this.setItemStatus(t,!1),!(this.itemsStatus[t].isAnimating=!0)!==e&&this.onSlideStart(!1,t);var s=document.querySelector("[".concat(this.toggleContentAttr,"='").concat(t,"']"));s.style.overflow="hidden",s.classList.remove(this.activeClass),s.style.maxHeight=s.clientHeight+"px",setTimeout(function(){s.style.maxHeight="0px"},5);var o=document.querySelectorAll("[".concat(this.toggleButtonAttr,"='").concat(t,"']"));0<o.length&&Array.prototype.slice.call(o).forEach(function(t,e){t.classList.remove(i.activeClass)}),n?(s.style.transition="".concat(this.animationSpeed,"ms ").concat(this.cssEasing),setTimeout(function(){!1!==e&&i.onSlideEnd(!1,t),s.style.transition="",i.itemsStatus[t].isAnimating=!1},this.animationSpeed)):(this.onSlideEnd(!1,t),this.itemsStatus[t].isAnimating=!1),this.itemsStatus.hasOwnProperty(t)&&(this.itemsStatus[t].isOpen=!1)}}},{key:"getTargetHeight",value:function(t){if(t){var e=t.cloneNode(!0),i=t.parentNode;e.style.maxHeight="none",e.style.opacity="0",i.appendChild(e);var n=e.clientHeight;return i.removeChild(e),n}}}]),e}();"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports=HandyCollapse);